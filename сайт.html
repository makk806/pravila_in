<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>pravila — Регистрация и Вход</title>
<style>
  body { font-family: Arial, sans-serif; background: #1e1e2f; color: #eee; display: flex; justify-content: center; align-items: center; height: 100vh; margin:0; }
  .container { background: #2a2a3d; padding: 30px; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.6); width: 320px; }
  h2 { text-align: center; color: #ff5555; margin-bottom: 20px; }
  input { width: 100%; padding: 10px; margin: 8px 0; border-radius: 6px; border: none; font-size: 16px; }
  button { width: 100%; background: #ff5555; color: white; border: none; padding: 12px; border-radius: 6px; font-size: 18px; cursor: pointer; }
  button:hover { background: #ff2222; }
  .switch { text-align: center; margin-top: 12px; cursor: pointer; color: #aaa; }
  .switch:hover { color: #ff5555; }
  .message { margin-top: 10px; text-align: center; min-height: 20px; }
  .google-btn { background: #4285F4; margin-top: 10px; }
</style>
</head>
<body>

<div class="container" id="container">

  <h2 id="form-title">Регистрация</h2>

  <form id="auth-form">
    <input type="email" id="email" placeholder="Email" required />
    <input type="password" id="password" placeholder="Пароль" required />
    <button type="submit" id="submit-btn">Зарегистрироваться</button>
  </form>

  <button id="google-signin-btn" class="google-btn">Войти через Google</button>

  <div class="switch" id="toggle-form">Уже есть аккаунт? Войти</div>
  <div class="message" id="message"></div>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

<script>
  // Вставь сюда свою конфигурацию Firebase для проекта "pravila"
  const firebaseConfig = {
    apiKey: "ТВОЙ_API_KEY",
    authDomain: "ТВОЙ_PROJECT.firebaseapp.com",
    projectId: "ТВОЙ_PROJECT",
    storageBucket: "ТВОЙ_PROJECT.appspot.com",
    messagingSenderId: "ТВОЙ_ID",
    appId: "ТВОЙ_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const formTitle = document.getElementById('form-title');
  const authForm = document.getElementById('auth-form');
  const toggleForm = document.getElementById('toggle-form');
  const submitBtn = document.getElementById('submit-btn');
  const message = document.getElementById('message');
  const googleBtn = document.getElementById('google-signin-btn');

  let isRegister = true;

  toggleForm.addEventListener('click', () => {
    isRegister = !isRegister;
    if (isRegister) {
      formTitle.textContent = 'Регистрация';
      submitBtn.textContent = 'Зарегистрироваться';
      toggleForm.textContent = 'Уже есть аккаунт? Войти';
      authForm.style.display = 'block';
      googleBtn.style.display = 'block';
    } else {
      formTitle.textContent = 'Вход';
      submitBtn.textContent = 'Войти';
      toggleForm.textContent = 'Нет аккаунта? Зарегистрироваться';
      authForm.style.display = 'block';
      googleBtn.style.display = 'block';
    }
    message.textContent = '';
    authForm.reset();
  });

  authForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const email = authForm.email.value;
    const password = authForm.password.value;
    message.textContent = '';

    if (isRegister) {
      auth.createUserWithEmailAndPassword(email, password)
        .then(() => {
          message.style.color = '#4caf50';
          message.textContent = '✅ Регистрация успешна! Теперь войдите.';
          authForm.reset();
          toggleForm.click();
        })
        .catch(err => {
          message.style.color = '#ff5555';
          message.textContent = '❌ Ошибка: ' + err.message;
        });
    } else {
      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          message.style.color = '#4caf50';
          message.textContent = '✅ Вход успешен! Добро пожаловать.';
          authForm.reset();
        })
        .catch(err => {
          message.style.color = '#ff5555';
          message.textContent = '❌ Ошибка: ' + err.message;
        });
    }
  });

  googleBtn.addEventListener('click', () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider)
      .then(result => {
        message.style.color = '#4caf50';
        message.textContent = '✅ Вход через Google успешен! Добро пожаловать, ' + (result.user.displayName || '') + '.';
      })
      .catch(err => {
        message.style.color = '#ff5555';
        message.textContent = '❌ Ошибка: ' + err.message;
      });
  });
</script>

</body>
</html>
